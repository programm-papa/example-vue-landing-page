<template>
  <div class="header" :class="scroll ? 'scroll' : ''">
    <div class="desctop flex">
      <a href="#" class="logo">
        <svg
          width="42"
          height="43"
          viewBox="0 0 42 43"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M16.265 18.0442C17.7435 18.0442 18.8934 16.8812 18.8934 15.3859C18.8934 13.8907 17.7435 12.7277 16.265 12.7277C14.7866 12.7277 13.6367 13.8907 13.6367 15.3859C13.6367 16.8812 14.8687 18.0442 16.265 18.0442ZM16.265 13.2277C15.0681 13.2277 14.1367 14.1615 14.1367 15.3859C14.1367 16.6003 15.1401 17.5442 16.265 17.5442C17.462 17.5442 18.3934 16.6104 18.3934 15.3859C18.3934 14.1615 17.462 13.2277 16.265 13.2277Z"
            fill="#696FE5"
          />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M26.1646 15.9178L14.6676 27.6005L11.585 24.4682L3.12891 32.4853C6.8044 38.4958 13.3611 42.5001 20.8326 42.5001C29.368 42.5001 36.7096 37.2742 39.9255 29.8016L26.1646 15.9178ZM11.5729 25.1687L3.76952 32.567C7.39627 38.2464 13.6877 42.0001 20.8326 42.0001C29.04 42.0001 36.1223 37.0462 39.3308 29.9118L26.1659 16.6294L14.6676 28.3133L11.5729 25.1687Z"
            fill="#696FE5"
          />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M40.3848 29.9992L40.5182 29.6893L26.1633 15.2063L14.6676 26.8876L11.5972 23.7677L2.49121 32.4009L2.70234 32.7462C6.46344 38.8966 13.1772 43.0001 20.8326 43.0001C29.5786 43.0001 37.0942 37.6452 40.3848 29.9992ZM14.6676 27.6005L26.1646 15.9178L39.9255 29.8016C36.7096 37.2742 29.368 42.5001 20.8326 42.5001C13.3611 42.5001 6.8044 38.4958 3.12891 32.4853L11.585 24.4682L14.6676 27.6005Z"
            fill="#696FE5"
          />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M14.1367 15.3859C14.1367 14.1615 15.0681 13.2277 16.265 13.2277C17.462 13.2277 18.3934 14.1615 18.3934 15.3859C18.3934 16.6104 17.462 17.5442 16.265 17.5442C15.1401 17.5442 14.1367 16.6003 14.1367 15.3859ZM3.76952 32.567L11.5729 25.1687L14.6676 28.3133L26.1659 16.6294L39.3308 29.9118C36.1223 37.0462 29.04 42.0001 20.8326 42.0001C13.6877 42.0001 7.39627 38.2464 3.76952 32.567Z"
            fill="#696FE5"
          />
          <path
            d="M21.001 0.5C9.39427 0.5 0.5 9.49544 0.5 21.2342C0.5 22.3035 0.578165 23.3544 0.729027 24.3815L1.22372 24.3089C1.07638 23.3058 1 22.2791 1 21.2342C1 9.76624 9.67573 1 21.001 1C32.3262 1 41 9.76618 41 21.2342C41 22.2791 40.9236 23.3058 40.7763 24.3089L41.271 24.3815C41.4218 23.3544 41.5 22.3035 41.5 21.2342C41.5 9.49544 32.6077 0.5 21.001 0.5Z"
            fill="#696FE5"
          />
          <path
            d="M0.5 21.2342C0.5 9.49544 9.39427 0.5 21.001 0.5C32.6077 0.5 41.5 9.49544 41.5 21.2342C41.5 22.3035 41.4218 23.3544 41.271 24.3815L41.7657 24.4542C41.9201 23.4031 42 22.3279 42 21.2342C42 9.22471 32.8892 0 21.001 0C9.11281 0 0 9.22465 0 21.2342C0 22.3279 0.0799506 23.4031 0.234336 24.4542L0.729027 24.3815C0.578165 23.3544 0.5 22.3035 0.5 21.2342Z"
            fill="#696FE5"
          />
        </svg>
      </a>
      <div class="links">
        <a href="#block3">Услуги</a>
        <div
          class="scroll_tracking__links"
          :class="scroll_tracking__linksClass"
        >
          <div class="links_row" ref="links_row">
            <a href="#step-one">Ребрендинг</a>
            <a href="#step-two">Разработка сайта</a>
            <a href="#step-three">Маркетинг</a>
          </div>
          <div
            class="prograss_row"
            :style="
              'padding-left:' +
              scrollTrackingLinksWidth.firstElement / 2 +
              'px; padding-right:' +
              scrollTrackingLinksWidth.thirdElement / 2 +
              'px;'
            "
          >
            <div class="progress">
              <div
                class="progress-active"
                :style="'width:' + progressWidth"
              ></div>
            </div>
          </div>
        </div>
        <a href="#block7">Кейсы</a>
        <a href="#block8">Методы</a>
        <a href="#block9">Пример</a>
        <a href="#block10">Отзывы</a>
        <a href="#contacts">Контакты</a>
      </div>
      <a href="" class="phone"> 8 800 123 45 67 </a>
      <div class="order-call flex">
        <div class="phone-icon">
          <svg
            width="16"
            height="16"
            viewBox="0 0 16 16"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M15.5 11.6833V14.63C15.5001 14.841 15.4202 15.0441 15.2763 15.1985C15.1325 15.3528 14.9355 15.4469 14.725 15.4617C14.3608 15.4867 14.0633 15.5 13.8333 15.5C6.46917 15.5 0.5 9.53083 0.5 2.16667C0.5 1.93667 0.5125 1.63917 0.538333 1.275C0.553102 1.06454 0.647151 0.867509 0.801503 0.723674C0.955855 0.579839 1.15902 0.499905 1.37 0.5H4.31667C4.42003 0.499896 4.51975 0.538216 4.59644 0.607517C4.67313 0.676818 4.72133 0.772152 4.73167 0.875C4.75083 1.06667 4.76833 1.21917 4.785 1.335C4.95061 2.49077 5.29 3.61486 5.79167 4.66917C5.87083 4.83583 5.81917 5.035 5.66917 5.14167L3.87083 6.42667C4.97038 8.98871 7.01212 11.0305 9.57417 12.13L10.8575 10.335C10.91 10.2617 10.9865 10.2091 11.0737 10.1864C11.161 10.1637 11.2535 10.1723 11.335 10.2108C12.3892 10.7116 13.513 11.0501 14.6683 11.215C14.7842 11.2317 14.9367 11.25 15.1267 11.2683C15.2294 11.2789 15.3245 11.3271 15.3936 11.4038C15.4628 11.4805 15.501 11.5801 15.5008 11.6833H15.5Z"
              fill="white"
            />
          </svg>
        </div>
        <div class="text">Заказать звонок</div>
      </div>
    </div>
    <div class="adaptive flex">
      <a href="#" class="logo">
        <svg
          width="42"
          height="43"
          viewBox="0 0 42 43"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M16.265 18.0442C17.7435 18.0442 18.8934 16.8812 18.8934 15.3859C18.8934 13.8907 17.7435 12.7277 16.265 12.7277C14.7866 12.7277 13.6367 13.8907 13.6367 15.3859C13.6367 16.8812 14.8687 18.0442 16.265 18.0442ZM16.265 13.2277C15.0681 13.2277 14.1367 14.1615 14.1367 15.3859C14.1367 16.6003 15.1401 17.5442 16.265 17.5442C17.462 17.5442 18.3934 16.6104 18.3934 15.3859C18.3934 14.1615 17.462 13.2277 16.265 13.2277Z"
            fill="#696FE5"
          />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M26.1646 15.9178L14.6676 27.6005L11.585 24.4682L3.12891 32.4853C6.8044 38.4958 13.3611 42.5001 20.8326 42.5001C29.368 42.5001 36.7096 37.2742 39.9255 29.8016L26.1646 15.9178ZM11.5729 25.1687L3.76952 32.567C7.39627 38.2464 13.6877 42.0001 20.8326 42.0001C29.04 42.0001 36.1223 37.0462 39.3308 29.9118L26.1659 16.6294L14.6676 28.3133L11.5729 25.1687Z"
            fill="#696FE5"
          />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M40.3848 29.9992L40.5182 29.6893L26.1633 15.2063L14.6676 26.8876L11.5972 23.7677L2.49121 32.4009L2.70234 32.7462C6.46344 38.8966 13.1772 43.0001 20.8326 43.0001C29.5786 43.0001 37.0942 37.6452 40.3848 29.9992ZM14.6676 27.6005L26.1646 15.9178L39.9255 29.8016C36.7096 37.2742 29.368 42.5001 20.8326 42.5001C13.3611 42.5001 6.8044 38.4958 3.12891 32.4853L11.585 24.4682L14.6676 27.6005Z"
            fill="#696FE5"
          />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M14.1367 15.3859C14.1367 14.1615 15.0681 13.2277 16.265 13.2277C17.462 13.2277 18.3934 14.1615 18.3934 15.3859C18.3934 16.6104 17.462 17.5442 16.265 17.5442C15.1401 17.5442 14.1367 16.6003 14.1367 15.3859ZM3.76952 32.567L11.5729 25.1687L14.6676 28.3133L26.1659 16.6294L39.3308 29.9118C36.1223 37.0462 29.04 42.0001 20.8326 42.0001C13.6877 42.0001 7.39627 38.2464 3.76952 32.567Z"
            fill="#696FE5"
          />
          <path
            d="M21.001 0.5C9.39427 0.5 0.5 9.49544 0.5 21.2342C0.5 22.3035 0.578165 23.3544 0.729027 24.3815L1.22372 24.3089C1.07638 23.3058 1 22.2791 1 21.2342C1 9.76624 9.67573 1 21.001 1C32.3262 1 41 9.76618 41 21.2342C41 22.2791 40.9236 23.3058 40.7763 24.3089L41.271 24.3815C41.4218 23.3544 41.5 22.3035 41.5 21.2342C41.5 9.49544 32.6077 0.5 21.001 0.5Z"
            fill="#696FE5"
          />
          <path
            d="M0.5 21.2342C0.5 9.49544 9.39427 0.5 21.001 0.5C32.6077 0.5 41.5 9.49544 41.5 21.2342C41.5 22.3035 41.4218 23.3544 41.271 24.3815L41.7657 24.4542C41.9201 23.4031 42 22.3279 42 21.2342C42 9.22471 32.8892 0 21.001 0C9.11281 0 0 9.22465 0 21.2342C0 22.3279 0.0799506 23.4031 0.234336 24.4542L0.729027 24.3815C0.578165 23.3544 0.5 22.3035 0.5 21.2342Z"
            fill="#696FE5"
          />
        </svg>
      </a>
    </div>
  </div>
</template>
<script>
export default {
  data() {
    return {
      scroll: false,
      scrollTrackingLinksWidth: {
        firstElement: 0,
        secondElement: 0,
        thirdElement: 0,
      },
    };
  },
  computed: {
    scroll_tracking__linksClass() {
      return this.$store.getters.getscrollTrackungStatus;
    },
    progressWidth() {
      if (this.scroll_tracking__linksClass == "active1") {
        return 0;
      } else if (this.scroll_tracking__linksClass == "active2") {
        return (
          this.scrollTrackingLinksWidth.firstElement / 2 +
          this.scrollTrackingLinksWidth.secondElement / 2 +
          55 +
          "px"
        );
      } else if (this.scroll_tracking__linksClass == "active3") {
        return "100%";
      } else {
        return "0px";
      }
    },
  },
  mounted() {
    const scrollTracking_linksRowSize = this.$refs.links_row.offsetWidth;
    const scrollTracking_linksChild = this.$refs.links_row.children;
    //Длинна первой ссылки
    this.scrollTrackingLinksWidth.firstElement =
      scrollTracking_linksChild[0].offsetWidth;
    //Длинна второй ссылки
    this.scrollTrackingLinksWidth.secondElement =
      scrollTracking_linksChild[1].offsetWidth;
    //Длинна третей ссылки
    this.scrollTrackingLinksWidth.thirdElement =
      scrollTracking_linksChild[2].offsetWidth;

    //Прикрепление шапки при скроле
    let scrollAmount = window.innerWidth < 768 ? 0 : 100;
    window.addEventListener("resize", function () {});
    window.addEventListener(
      "scroll",
      function (event) {
        this.scroll = event.currentTarget.scrollY >= scrollAmount;
      }.bind(this)
    );
  },
};
</script>
<style lang="scss" scoped>
.header {
  width: 100%;
  height: 120px;
  transition: 0.5s;
  position: sticky;
  top: 0;
  background-color: #ffffff;
  z-index: 10;
  .desctop {
    height: 100%;
    align-items: center;
    padding: 0px 120px 0px;
    .links {
      margin-left: auto;
      width: 1030px;
      padding: 0px 20px;
      display: flex;
      align-items: center;
      gap: 40px;
      a {
        position: relative;
        display: block;
        font-style: normal;
        font-weight: 400;
        font-size: 16px;
        line-height: 20px;
        letter-spacing: 0.02em;
        color: #424c5c;
        &:hover {
          text-shadow: 0 0 0.45px #333, 0 0 0.45px #333;
          &::before {
            position: absolute;
            content: "";
            width: 100%;
            height: 1px;
            background-color: #696fe6;
            left: 0;
            bottom: -3px;
          }
        }
      }
      .scroll_tracking__links {
        position: relative;
        .links_row {
          position: relative;
          z-index: 3;
          display: flex;
          gap: 40px;
          a {
            display: flex;
            justify-content: center;
            &::before {
              position: absolute;
              content: "";
              width: 15px;
              height: 15px;
              border-radius: 100%;
              background-color: #cbcdf4;
              bottom: -15px;
              left: auto;
            }
            &:hover {
              &::before {
                background-color: #696fe6;
              }
            }
          }
        }
        .prograss_row {
          position: absolute;
          width: 100%;
          height: 2px;
          bottom: -8px;
          padding-left: 20px;
          .progress {
            width: 100%;
            height: 2px;
            background-color: #cbcdf4;
            .progress-active {
              transition: width 0.7s;
              height: 2px;
              width: 0px;
              background-color: #696fe6;
            }
          }
        }
        //Стиль заполнения
        &.active1 {
          .links_row {
            a:nth-of-type(1) {
              &::before {
                transition: background-color 0.7s;
                background-color: #696fe6;
              }
            }
          }
        }
        &.active2 {
          .links_row {
            a:nth-of-type(1),
            a:nth-of-type(2) {
              &::before {
                transition: background-color 0.7s;
                background-color: #696fe6;
              }
            }
          }
        }
        &.active3 {
          .links_row {
            a:nth-of-type(1),
            a:nth-of-type(2),
            a:nth-of-type(3) {
              &::before {
                transition: background-color 0.7s;
                background-color: #696fe6;
              }
            }
          }
        }
      }
    }
    .phone {
      margin-left: 70px;
      font-weight: 500;
      font-size: 16px;
      line-height: 20px;
      letter-spacing: 0.02em;
      color: #424c5c;
    }
    .order-call {
      margin-left: 55px;
      width: 200px;
      height: 40px;
      border-radius: 61px;
      border: 2px solid #696fe6;
      gap: 17px;
      cursor: pointer;
      align-items: center;
      position: relative;
      overflow: hidden;
      .phone-icon {
        width: 30px;
        height: 30px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: #696fe6;
        border-radius: 100%;
        z-index: 1;
        position: relative;
        right: -5px;
        transition: right 0.3s;
      }
      .text {
        font-weight: 500;
        font-size: 16px;
        line-height: 19px;
        color: #696fe6;
        position: relative;
        z-index: 1;
        left: 0px;
        transition: color 0.3s, left 0.3s;
      }
      // &::before {
      //     position: absolute;
      //     content: "";
      //     width: 30px;
      //     height: 30px;
      //     border-radius: 61px;
      //     background: #696fe6;
      //     transition: width 0.3s, height 0.3s, left 0.3s;
      //     left: 5px;
      // }
      &:hover {
        background: #696fe6;
        // transition: background;
        // transition-delay: 0.25s;
        .phone-icon {
          background: #fff;
          left: auto;
          right: -162px;
          svg {
            path {
              fill: #696fe6;
            }
          }
        }
        .text {
          color: #fff;
          left: -25px;
        }
        &::before {
          width: 200px;
          height: 40px;
          left: 0px;
        }
      }
    }
  }
  .adaptive {
    height: 100%;
    align-items: center;
    padding: 0px 40px;
  }
  border-bottom: 3px solid #ecc0c7;
  &.scroll {
    height: 70px;
    border-bottom: 2px solid #ecc0c7;
  }
}
@media screen and (max-width: 1800px) {
  .header {
    .desctop {
      padding: 0 30px 0px;
    }
  }
}
@media screen and (max-width: 1600px) {
  .header {
    .desctop {
      .phone {
        margin-left: 10px;
      }
      .order-call {
        margin-left: 25px;
      }
    }
  }
}
@media screen and (max-width: 1500px) {
  .header {
    .desctop {
      display: none;
    }
    .adaptive {
      display: flex;
    }
  }
}
</style>
